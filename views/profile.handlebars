<div class="col-md-auto">
  <div>
    <h2>Welcome, {{name}}!</h2>
  </div>
</div>

<div class="">
  <div class="">
    <h3>Create a New Artist:</h3>

    <form class="form new-project-form width-40">
      <div class="form-group">
        <label for="project-name ">Artist Name:</label>
        <input class="form-input" type="text" id="project-name" name="project-name" />
      </div>
      <div class="form-group">
        <label for="artist-bio">Artist Bio:</label>
        <input class="form-input width-40" type="text" id="artist-bio" name="artist-bio" />
      </div>
      <div>
        {{!-- cloudinary upload widget magic --}}
        <label for="project-img">Artist Image:</label>
        <button id="upload_widget" class="cloudinary-button btn hover:bg-green-600 hover:text-green-200 bg-red-100 text-white-700 mx-5 my-10 px-6 py-2 rounded-lg">Upload files</button>
        <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  
        <script type="text/javascript">  
        var myWidget = cloudinary.createUploadWidget({
          cloudName: 'doetzelhn', 
          uploadPreset: 'bgdwrnsi'}, (error, result) => { 
            if (!error && result && result.event === "success") { 
              console.log('Done! Here is the image info: ', result.info.url); 
              document.getElementById("artist-img").value = result.info.url;
            }
          }
        )
        document.getElementById("upload_widget").addEventListener("click", function(event){
            event.preventDefault();
            myWidget.open();
          }, false);
        </script>
      </div>
      <div class="form-group">
        <input class="form-input" type="hidden" id="artist-img" name="artist-img" value=""/>
      </div>
      <div class="form-group">
        <button type="submit" class="btn hover:bg-green-600 hover:text-green-200 bg-red-100 text-white-700 mx-5 my-10 px-6 py-2 rounded-lg">Create</button>
      </div>
    </form>
  </div>

  {{#if projects.length}}
  <div class="col-md-6 project-list flex-col">
    <h3>Current Projects:</h3>

    {{#each projects as |project|}}
    <div class="row mb-2">
      <div class="col-md-8">
        <h4><a href="/project/{{project.id}}">{{project.name}}</a></h4>
      </div>
      <div class="col-md-4">
        <button class="btn btn-sm btn-danger" data-id="{{project.id}}">DELETE</button>
      </div>
    </div>
    {{/each}}
  </div>
  {{/if}}
</div>

<script src="./js/profile.js"></script>
